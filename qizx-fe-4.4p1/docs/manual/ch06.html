<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;6.&nbsp;Support of standard XQuery Update</title><link rel="stylesheet" href="html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.73.1"><link rel="start" href="index.html" title="Qizx Manual"><link rel="up" href="admin_guide.html" title="Part&nbsp;II.&nbsp;User's Guide"><link rel="prev" href="server.html" title="Chapter&nbsp;5.&nbsp;Installing and Using Qizx Server"><link rel="next" href="std_fulltext.html" title="Chapter&nbsp;7.&nbsp;Support of standard XQuery Full-Text"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;6.&nbsp;Support of standard XQuery Update</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="server.html">Prev</a>&nbsp;</td><th width="60%" align="center">Part&nbsp;II.&nbsp;User's Guide</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="std_fulltext.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="d0e3173"></a>Chapter&nbsp;6.&nbsp;Support of standard XQuery Update</h2></div></div></div><p>Qizx fully supports <a class="ulink" href="http://www.w3.org/TR/xquery-update-10/" target="_top">XQuery Update Facility 1.0</a> as specified in the W3C's Working Draft dated 28 August 2007.</p><p>This extension allows updating XML documents using four primitive operations <span class="command"><strong>insert</strong></span>, <span class="command"><strong>delete</strong></span>, <span class="command"><strong>replace</strong></span> and <span class="command"><strong>rename</strong></span>. It also defines a <span class="command"><strong>copy/modify/return</strong></span> instruction which allows transforming an XML tree by first copying it, then updating the copy using the four primitive operations.</p><p>For a more detailed introduction, please read the <a class="ulink" href="http://www.xmlmind.com/tutorials/XQueryUpdate/index.html" target="_top">XQuery Update tutorial</a> available on the Qizx web site.</p><h2><a name="d0e3203"></a>Specificities of XQuery Update in Qizx</h2><p>The XQuery Update specifications leave some room for implementation-specific features. Here are the specifics in Qizx:</p><div class="itemizedlist"><ul type="disc"><li><p>When an XQuery expression is updating (as defined in the specifications), corresponding updates are automatically performed at the end of the execution of the expression.</p></li><li><p>Transactions: by default commit() is performed for each XQuery expression execution that updates one document (or several documents) in an XML Library. This auto-commit can be disabled and re-enabled through an API method Library.setAutoCommitting(). When auto-commit is disabled, the commit() method has to be called explicitly.</p></li><li><p>Working on parsed documents<sup>[<a name="d0e3217" href="#ftn.d0e3217" class="footnote">2</a>]</sup> in memory is possible, but updates are not saved, because source documents can be specified as any URL (for example HTTP), and it is hardly feasible or even desirable to actually perform such changes.</p><p>To update a document stored in a file, we recommend using the copy/modify/return instruction, then the serialization function x:serialize on the result. Thus the user has full control on how the document is written back to the source.</p></li><li><p>The standard function fn:put() is equivalent to xlib:write-document (though with a different argument order).</p><p>It can only write to a document of an XML Library. The node must be a document-node or an element.</p></li><li><p>Deleting a parentless node raises an error err:XUDY0020.</p></li><li><p>External functions cannot perform updates (i.e return update lists).</p></li></ul></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a name="ftn.d0e3217" href="#d0e3217" class="para">2</a>] </sup>"parsed documents" are documents which are not stored in an XML Library, but loaded into memory by XML parsing a file or from an URL.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="server.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="admin_guide.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="std_fulltext.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;5.&nbsp;Installing and Using Qizx Server&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;7.&nbsp;Support of standard XQuery Full-Text</td></tr></table></div></body></html>